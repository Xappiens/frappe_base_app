import{s as L,r as f,k as C,a as p,o as a,c as l,d as i,b as r,u as s,l as k,m as c,w as b,h as g,F as V,f as M,C as B,e as x,t as E}from"./index-1f5f3a1b.js";const S={class:"flex h-screen w-screen justify-center bg-gray-100"},j={class:"mt-32 w-full px-4"},F={class:"mx-auto mt-6 w-full px-4 sm:w-96"},N={class:"mt-4"},R={key:1,class:"mx-auto space-y-2"},T=["href"],P=["innerHTML"],U={__name:"Login",setup(z){const u=L();let o=f(!1),n=f(""),d=f(""),m=C({url:"crm.api.auth.oauth_providers",auto:!0,onSuccess(v){o.value=v.length===0}});m.fetch();function h(){u.login.submit({usr:n.value,pwd:d.value})}return(v,e)=>{const y=p("FormControl"),w=p("ErrorMessage"),_=p("Button");return a(),l("div",S,[i("div",j,[r(B,{class:"mx-auto h-10"}),e[6]||(e[6]=i("div",{class:"mt-6 flex items-center justify-center space-x-1.5"},[i("span",{class:"text-3xl font-semibold text-gray-900"},"Login to CRM")],-1)),i("div",F,[s(o)?(a(),l("form",{key:0,method:"POST",action:"/api/method/login",onSubmit:k(h,["prevent"])},[i("div",null,[r(y,{variant:"outline",size:"md",type:(s(n)||"").toLowerCase()==="administrator"?"text":"email",label:"Email",modelValue:s(n),"onUpdate:modelValue":e[0]||(e[0]=t=>c(n)?n.value=t:n=t),placeholder:"jane@example.com",disabled:s(u).login.loading},null,8,["type","modelValue","disabled"])]),i("div",N,[r(y,{variant:"outline",size:"md",label:"Password",modelValue:s(d),"onUpdate:modelValue":e[1]||(e[1]=t=>c(d)?d.value=t:d=t),placeholder:"••••••",disabled:s(u).login.loading,type:"password"},null,8,["modelValue","disabled"])]),r(w,{class:"mt-2",message:s(u).login.error},null,8,["message"]),r(_,{variant:"solid",class:"mt-6 w-full",loading:s(u).login.loading},{default:b(()=>[...e[4]||(e[4]=[x(" Login ",-1)])]),_:1},8,["loading"]),s(m).data.length?(a(),l("button",{key:0,class:"mt-2 w-full py-2 text-base text-gray-600",onClick:e[2]||(e[2]=t=>c(o)?o.value=!1:o=!1)}," Login using other methods ")):g("",!0)],32)):g("",!0),s(m).data&&!s(o)?(a(),l("div",R,[r(_,{onClick:e[3]||(e[3]=t=>c(o)?o.value=!0:o=!0),variant:"solid",class:"w-full"},{default:b(()=>[...e[5]||(e[5]=[x(" Login via email ",-1)])]),_:1}),(a(!0),l(V,null,M(s(m).data,t=>(a(),l("a",{class:"flex justify-center items-center gap-2 w-full rounded border bg-gray-900 px-3 py-1 text-center text-base h-7 focus:outline-none focus:ring-2 focus:ring-gray-400 text-white transition-colors hover:bg-gray-700",key:t.name,href:t.auth_url},[t.icon?(a(),l("div",{key:0,innerHTML:t.icon},null,8,P)):g("",!0),x(" Login via "+E(t.provider_name),1)],8,T))),128))])):g("",!0)])])])}}};export{U as default};
//# sourceMappingURL=Login-b4a656bf.js.map
