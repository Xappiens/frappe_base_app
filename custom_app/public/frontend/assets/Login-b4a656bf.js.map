{"version":3,"file":"Login-b4a656bf.js","sources":["../../../../frontend/src/pages/Login.vue"],"sourcesContent":["<template>\n  <div class=\"flex h-screen w-screen justify-center bg-gray-100\">\n    <div class=\"mt-32 w-full px-4\">\n      <CRMLogo class=\"mx-auto h-10\" />\n      <div class=\"mt-6 flex items-center justify-center space-x-1.5\">\n        <span class=\"text-3xl font-semibold text-gray-900\">Login to CRM</span>\n      </div>\n      <div class=\"mx-auto mt-6 w-full px-4 sm:w-96\">\n        <form\n          v-if=\"showEmailLogin\"\n          method=\"POST\"\n          action=\"/api/method/login\"\n          @submit.prevent=\"submit\"\n        >\n          <div>\n            <FormControl\n              variant=\"outline\"\n              size=\"md\"\n              :type=\"\n                (email || '').toLowerCase() === 'administrator'\n                  ? 'text'\n                  : 'email'\n              \"\n              label=\"Email\"\n              v-model=\"email\"\n              placeholder=\"jane@example.com\"\n              :disabled=\"session.login.loading\"\n            />\n          </div>\n          <div class=\"mt-4\">\n            <FormControl\n              variant=\"outline\"\n              size=\"md\"\n              label=\"Password\"\n              v-model=\"password\"\n              placeholder=\"••••••\"\n              :disabled=\"session.login.loading\"\n              type=\"password\"\n            />\n          </div>\n          <ErrorMessage class=\"mt-2\" :message=\"session.login.error\" />\n          <Button\n            variant=\"solid\"\n            class=\"mt-6 w-full\"\n            :loading=\"session.login.loading\"\n          >\n            Login\n          </Button>\n          <button\n            v-if=\"authProviders.data.length\"\n            class=\"mt-2 w-full py-2 text-base text-gray-600\"\n            @click=\"showEmailLogin = false\"\n          >\n            Login using other methods\n          </button>\n        </form>\n        <div\n          class=\"mx-auto space-y-2\"\n          v-if=\"authProviders.data && !showEmailLogin\"\n        >\n          <Button @click=\"showEmailLogin = true\" variant=\"solid\" class=\"w-full\">\n            Login via email\n          </Button>\n          <a\n            class=\"flex justify-center items-center gap-2 w-full rounded border bg-gray-900 px-3 py-1 text-center text-base h-7 focus:outline-none focus:ring-2 focus:ring-gray-400 text-white transition-colors hover:bg-gray-700\"\n            v-for=\"provider in authProviders.data\"\n            :key=\"provider.name\"\n            :href=\"provider.auth_url\"\n          >\n            <div v-if=\"provider.icon\" v-html=\"provider.icon\" />\n            Login via {{ provider.provider_name }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport CRMLogo from '@/components/Icons/CRMLogo.vue';\nimport { sessionStore } from '@/stores/session'\nimport { createResource } from 'frappe-ui'\nimport { ref } from 'vue'\n\nconst session = sessionStore()\nlet showEmailLogin = ref(false)\nlet email = ref('')\nlet password = ref('')\n\nlet authProviders = createResource({\n  url: 'crm.api.auth.oauth_providers',\n  auto: true,\n  onSuccess(data) {\n    showEmailLogin.value = data.length === 0\n  },\n})\nauthProviders.fetch()\n\nfunction submit() {\n  session.login.submit({\n    usr: email.value,\n    pwd: password.value,\n  })\n}\n</script>\n"],"names":["session","sessionStore","showEmailLogin","ref","email","password","authProviders","createResource","data","submit","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","CRMLogo","_hoisted_3","_unref","_component_FormControl","$event","_hoisted_4","_component_ErrorMessage","_component_Button","_cache","_isRef","_hoisted_5","_Fragment","_renderList","provider","_toDisplayString"],"mappings":"yZAmFA,MAAMA,EAAUC,EAAa,EAC7B,IAAIC,EAAiBC,EAAI,EAAK,EAC1BC,EAAQD,EAAI,EAAE,EACdE,EAAWF,EAAI,EAAE,EAEjBG,EAAgBC,EAAe,CACjC,IAAK,+BACL,KAAM,GACN,UAAUC,EAAM,CACdN,EAAe,MAAQM,EAAK,SAAW,CACxC,CACH,CAAC,EACDF,EAAc,MAAM,EAEpB,SAASG,GAAS,CAChBT,EAAQ,MAAM,OAAO,CACnB,IAAKI,EAAM,MACX,IAAKC,EAAS,KAClB,CAAG,CACH,0EArGE,OAAAK,EAAA,EAAAC,EA0EM,MA1ENC,EA0EM,CAzEJC,EAwEM,MAxENC,EAwEM,CAvEJC,EAAgCC,EAAA,CAAvB,MAAM,cAAc,CAAA,cAC7BH,EAEM,MAAA,CAFD,MAAM,qDAAmD,CAC5DA,EAAsE,OAAhE,CAAA,MAAM,sCAAsC,EAAC,cAAY,QAEjEA,EAkEM,MAlENI,EAkEM,CAhEIC,EAAchB,CAAA,OADtBS,EA+CO,OAAA,OA7CL,OAAO,OACP,OAAO,oBACN,WAAgBF,EAAM,CAAA,SAAA,CAAA,IAEvBI,EAcM,MAAA,KAAA,CAbJE,EAYEI,EAAA,CAXA,QAAQ,UACR,KAAK,KACJ,MAAwBD,EAAAd,CAAA,OAAa,YAAW,IAAA,+BAKjD,MAAM,mBACGc,EAAKd,CAAA,4CAALA,EAAK,MAAAgB,EAAAhB,EAAAgB,GACd,YAAY,mBACX,SAAUF,EAAAlB,CAAA,EAAQ,MAAM,oDAG7Ba,EAUM,MAVNQ,EAUM,CATJN,EAQEI,EAAA,CAPA,QAAQ,UACR,KAAK,KACL,MAAM,sBACGD,EAAQb,CAAA,4CAARA,EAAQ,MAAAe,EAAAf,EAAAe,GACjB,YAAY,SACX,SAAUF,EAAAlB,CAAA,EAAQ,MAAM,QACzB,KAAK,gDAGTe,EAA4DO,EAAA,CAA9C,MAAM,OAAQ,QAASJ,EAAAlB,CAAA,EAAQ,MAAM,2BACnDe,EAMSQ,EAAA,CALP,QAAQ,QACR,MAAM,cACL,QAASL,EAAAlB,CAAA,EAAQ,MAAM,oBACzB,IAED,CAAA,GAAAwB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,UAED,EAAA,0BAEQN,EAAaZ,CAAA,EAAC,KAAK,YAD3BK,EAMS,SAAA,OAJP,MAAM,2CACL,uBAAOc,EAAcvB,CAAA,EAAAA,EAAA,MAAA,GAAAA,EAAA,KACvB,6BAED,2BAIMgB,EAAaZ,CAAA,EAAC,MAAI,CAAKY,EAAchB,CAAA,GAF7CQ,IAAAC,EAgBM,MAhBNe,EAgBM,CAZJX,EAESQ,EAAA,CAFA,uBAAOE,EAAcvB,CAAA,EAAAA,EAAA,MAAA,GAAAA,EAAA,IAAS,QAAQ,QAAQ,MAAM,qBAAS,IAEtE,CAAA,GAAAsB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFsE,oBAEtE,EAAA,aACAd,EAAA,EAAA,EAAAC,EAQIgB,EANiB,KAAAC,EAAAV,EAAAZ,CAAA,EAAc,KAA1BuB,QAFTlB,EAQI,IAAA,CAPF,MAAM,kNAEL,IAAKkB,EAAS,KACd,KAAMA,EAAS,WAELA,EAAS,UAApBlB,EAAmD,MAAA,OAAzB,UAAQkB,EAAS,4BAAQ,cACzCC,EAAGD,EAAS,aAAa,EAAA,CAAA"}